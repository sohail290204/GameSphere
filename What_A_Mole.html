<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whack-a-Mole</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --mole-up-duration: 500ms;
        }
body {
    font-family: 'Roboto', sans-serif;
    background-color: #f0f0f0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    color: #333;
    background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80'); /* Example image */
    background-size: cover;
    background-position: center;
}
        .game-container {
            background-color: #8b4513; /* A nice brown for the "field" */
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .info-board {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-bottom: 20px;
        }

        .score-board, .timer-board {
            background-color: #fff;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.5rem;
            font-weight: bold;
            display: inline-block;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-width: 150px; /* Ensures they don't shift when text changes */
        }

        .score, .timer {
            color: #4CAF50;
        }

        .title {
            color: #fff;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 15px;
            padding: 20px;
            background-color: #6b3e1b;
            border-radius: 15px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .hole {
            width: 120px;
            height: 120px;
            background-color: #5d341b;
            border-radius: 50%;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 5px 10px rgba(0, 0, 0, 0.4);
            border: 5px solid #4a2a17;
        }

        .mole {
            width: 100px;
            height: 100px;
            background-color: #885b3c;
            border-radius: 50%;
            position: absolute;
            bottom: -100px; /* Hidden below the hole */
            transition: bottom var(--mole-up-duration) cubic-bezier(0.68, -0.55, 0.27, 1.55);
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" style="fill:rgba(0,0,0,0); stroke:rgba(255,255,255,0.7); stroke-width:2;"><path d="M16 4 L16 28 M4 16 L28 16" /></svg>') 16 16, pointer;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
            border: 4px solid #6c472c;
        }

        .mole.up {
            bottom: 0;
            transition: bottom var(--mole-up-duration) cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .mole:active {
            transform: scale(0.9);
            transition: transform 0.1s ease-out;
        }

        .start-button, .stop-button {
            padding: 12px 24px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin-top: 20px;
        }

        .start-button {
            background-color: #4CAF50;
        }

        .start-button:hover {
            background-color: #45a049;
        }

        .stop-button {
            background-color: #F44336;
        }
        
        .stop-button:hover {
            background-color: #d32f2f;
        }

        .start-button:active, .stop-button:active {
            transform: translateY(2px);
        }

        .hit {
            background-color: #e91e63 !important; /* Visual feedback for a hit */
        }

        /* Basic mole face for fun */
        .mole::before, .mole::after {
            content: '';
            position: absolute;
            background-color: #222;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            top: 20px;
        }

        .mole::before {
            left: 20px;
        }

        .mole::after {
            right: 20px;
        }

        .mole .nose {
            width: 15px;
            height: 8px;
            background-color: #444;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: absolute;
            top: 35px;
        }

        @keyframes hide-cursor {
            from { cursor: none; }
            to { cursor: none; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="title">Whack-a-Mole!</h1>
        <div class="info-board">
            <div class="score-board">
                Score: <span class="score" id="score">0</span>
            </div>
            <div class="timer-board">
                Time: <span class="timer" id="timer">30</span>
            </div>
        </div>
        <div class="game-board" id="game-board">
            </div>
        <button class="start-button" id="start-button">Start Game</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameBoard = document.getElementById('game-board');
            const scoreDisplay = document.getElementById('score');
            const timerDisplay = document.getElementById('timer');
            const startButton = document.getElementById('start-button');

            const totalHoles = 9;
            let score = 0;
            let lastHole;
            let timeUp = false;
            let gameInterval;
            let timerInterval;
            let gameDuration = 30; // in seconds

            // Create the holes and moles
            function createHoles() {
                for (let i = 0; i < totalHoles; i++) {
                    const hole = document.createElement('div');
                    hole.classList.add('hole');
                    const mole = document.createElement('div');
                    mole.classList.add('mole');
                    hole.appendChild(mole);
                    gameBoard.appendChild(hole);
                }
            }

            // Pick a random hole to make a mole appear
            function randomHole(holes) {
                const idx = Math.floor(Math.random() * holes.length);
                const hole = holes[idx];
                // Prevent the same hole from appearing twice in a row
                if (hole === lastHole) {
                    return randomHole(holes);
                }
                lastHole = hole;
                return hole;
            }

            // Randomize the time a mole is visible
            function randomTime(min, max) {
                return Math.round(Math.random() * (max - min) + min);
            }

            // Make a mole "pop up"
            function popUp() {
                const holes = document.querySelectorAll('.hole');
                const hole = randomHole(holes);
                const mole = hole.querySelector('.mole');
                const time = randomTime(500, 1500);
                
                mole.classList.add('up');

                setTimeout(() => {
                    mole.classList.remove('up');
                    if (!timeUp) {
                        popUp();
                    }
                }, time);
            }

            // Handle the mole being hit
            function whack(e) {
                if (!e.isTrusted || !e.target.classList.contains('mole')) return; // Check if it's a real click
                score++;
                e.target.classList.remove('up');
                e.target.classList.add('hit');
                setTimeout(() => e.target.classList.remove('hit'), 300); // Visual feedback
                scoreDisplay.textContent = score;
            }

            // End the game
            function endGame() {
                timeUp = true;
                clearInterval(gameInterval);
                clearInterval(timerInterval);
                startButton.textContent = 'Play Again?';
                startButton.disabled = false;
                startButton.classList.remove('stop-button');
                startButton.classList.add('start-button');
                
                // Hide all moles
                const moles = document.querySelectorAll('.mole');
                moles.forEach(mole => {
                    mole.classList.remove('up');
                    mole.removeEventListener('click', whack);
                });

                alert(`Game over! Your final score is ${score}`);
            }

            // Start the game
            function startGame() {
                score = 0;
                scoreDisplay.textContent = score;
                timeUp = false;
                
                // Change button to "Stop" and disable it temporarily
                startButton.textContent = 'Stop Game';
                startButton.classList.remove('start-button');
                startButton.classList.add('stop-button');
                
                let timeLeft = gameDuration;
                timerDisplay.textContent = timeLeft;

                // Add event listeners for the moles
                const moles = document.querySelectorAll('.mole');
                moles.forEach(mole => mole.addEventListener('click', whack));

                // Start the game pop-up loop
                popUp();

                // Start the timer
                timerInterval = setInterval(() => {
                    timeLeft--;
                    timerDisplay.textContent = timeLeft;
                    if (timeLeft <= 0) {
                        endGame();
                    }
                }, 1000);
            }

            // Handle button clicks
            function handleButtonClick() {
                if (startButton.classList.contains('start-button')) {
                    startGame();
                } else if (startButton.classList.contains('stop-button')) {
                    endGame();
                }
            }

            createHoles();
            startButton.addEventListener('click', handleButtonClick);
        });
    </script>
</body>
</html>